# @package _global_

defaults:
  - override /dataset: nersemble
  - override /model/encoder: costvolume
  - override /loss: [mse, lpips]

wandb:
  name: nersemble_train
  tags: [nersemble, 512x512]

data_loader:
  train:
    batch_size: 1

trainer:
  max_steps: 300_001

model:
  encoder:
    num_depth_candidates: 128
    costvolume_unet_feat_dim: 128
    costvolume_unet_channel_mult: [1,1,1]
    costvolume_unet_attn_res: [4]
    gaussians_per_pixel: 1
    depth_unet_feat_dim: 32
    depth_unet_attn_res: [16]
    depth_unet_channel_mult: [1,1,1,1,1]

loss:
  lpips:
    apply_after_step: 0
    weight: 0.05

dataset:
  image_shape: [476, 476]
  roots: [/data/baosongze/workspace/3D/3D_debug_data/nersemble_data_expand]
  view_names: ['222200037', '220700191', '221501007', '222200036', '222200046', '222200047', '222200049']
  near: 0.1
  far: 100.0
  baseline_scale_bounds: false
  make_baseline_1: false

test:
  eval_time_skip_steps: 5
  compute_scores: true
